<!doctype html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, maximum-scale=1.0, user-scalable=yes'>
<title>Installation ‚Äî Hiragana IME</title>
<link href='../icon.png' rel='icon'>
<link rel='stylesheet' type='text/css' href='default.css'>
<meta content='Installation' name='description'>
<meta content='https://esrille.github.io/ibus-hiragana/install.html' property='og:url'>
<meta content='Installation ‚Äî Hiragana IME' property='og:title'>
<meta content='Installation' property='og:description'>
<meta content='https://esrille.github.io/ibus-hiragana/screenshot.png' property='og:image'>
<meta content='product' property='og:type'>
<meta content='summary_large_image' name='twitter:card'>
<meta content='@esrille' name='twitter:creator'>
<script>
function expandToc() {
  document.getElementById('toc').querySelectorAll('details').forEach((e) => {
    e.setAttribute('open', 'open')
  })
}
function shrinkToc() {
  document.getElementById('toc').querySelectorAll('details').forEach((e) => {
    e.removeAttribute('open')
  })
}
</script>
</head>
<body>
<div id='wrapper'>
<div id='sidebar'>
<header id='title'>
<a href='https://github.com/esrille/ibus-hiragana'><img alt='icon' src='../icon.png'> Hiragana IME</a>
<div style='float: right; font-size: 10px;'>
<div style='position: relative; top: 18px;'>
<button onclick='shrinkToc()'>‚ñ≤</button>
<button onclick='expandToc()'>‚ñº</button>
</div>
</div>
</header>
<div id='toc'>
<ul>
<li><details><summary><a href='index.html'>Hiragana IME for IBus</a></summary>
<ul>
  <li><a href='index.html#introduction'>Introduction</a>
  <li><a href='index.html#modeless'>Modeless input methods</a>
</ul>
</details>
<li><details open><summary><a href='install.html'>Installation</a></summary>
<ul>
  <li><a href='install.html#install'>Install the Hiragana IME software package</a>
  <li><a href='install.html#input-source'>Add the Hiragana IME to the input sources</a>
  <li><a href='install.html#enable'>Enable the Hiragana IME</a>
  <li><a href='install.html#wayland'>Change the Configuration for Wayland</a>
  <li><a href='install.html#llm'>Installation of Additional Components for Using a Large-Scale Language Model</a>
</ul>
</details>
<li><details><summary><a href='usage.html'>Usage</a></summary>
<ul>
  <li><a href='usage.html#input-mode'>Changing Input Modes</a>
  <li><a href='usage.html#input-kanji'>Inputting Kanji and Katakana Words</a>
  <li><a href='usage.html#input-okurigana'>Entering Words with Okurigana</a>
  <li><a href='usage.html#input-shrink'>Changing the Length of the Reading</a>
</ul>
</details>
<li><details><summary><a href='key_assign.html'>Key Bindings</a></summary>
<ul>
  <li><a href='key_assign.html#input-mode'>Key Bindings for Changing Input Mode</a>
  <li><a href='key_assign.html#input-hiragana-mode'>Key bindings in Hiragana Mode</a>
  <li><a href='key_assign.html#input-conversion'>Key Bindings during Conversion</a>
</ul>
</details>
<li><details><summary><a href='settings.html'>Settings</a></summary>
<ul>
  <li><a href='settings.html#ibus-setup-hiragana'>Hiragana IME Setup Window</a>
  <li><a href='settings.html#layout'>Keyboard Tab</a>
  <li><a href='settings.html#dictionary'>Dictionary Tab</a>
  <li><a href='settings.html#option'>Option Tab</a>
</ul>
</details>
<li><details><summary><a href='layouts.html'>Kana Input</a></summary>
<ul>
  <li><a href='layouts.html#jis'>Kana (JIS Layout)</a>
  <li><a href='layouts.html#new_stickney'>Kana (New Stickney Layout)</a>
  <li><a href='layouts.html#history'>Why the current JIS Kana layout is hard to use?</a>
</ul>
</details>
<li><details><summary><a href='roomazi.html'>R≈çmaji Input</a></summary>
<ul>
  <li><a href='roomazi.html#tuzuri'>Inputting Japanese in R≈çmaji</a>
  <li><a href='roomazi.html#hyo'>Romanization Charts</a>
  <li><a href='roomazi.html#keyboard'>Key Bindings</a>
</ul>
</details>
<li><details><summary><a href='altgr.html'>AltGr Key</a></summary>
<ul>
  <li><a href='altgr.html#altgr'>What is <span class='key'>AltGr</span> key?</a>
  <li><a href='altgr.html#altgr-settings'>Switching the right <span class='key'>Alt</span> key to the <span class='key'>AltGr</span> key</a>
  <li><a href='altgr.html#altgr-characters'>Entering Characters and Symbols on the <span class='key'>AltGr</span> Layers</a>
</ul>
</details>

</ul>
<hr>
<a href='../index.html' id='toc-lang'>Êó•Êú¨Ë™û üåé</a>
</div>
</div>
<main>
<h1>Installation</h1>
<p>To set up the Hiragana IME, follow the steps below:</p>
<ol>
<li><a href="#install">Install the Hiragana IME software package</a></li>
<li><a href="#input-source">Add the Hiragana IME to the input sources</a></li>
<li><a href="#enable">Enable the Hiragana IME</a></li>
<li><a href="#wayland">Change the Configuration for Wayland</a></li>
</ol>
<h2 id="install">Install the Hiragana IME software package</h2>
<p>If you use Fedora or Ubuntu, the Hiragana IME package will be automatically downloaded during installation using the <strong>dnf</strong> or <strong>apt</strong> command.</p>
<h3>Instructions for Fedora</h3>
<p>The RPM packages are available in the Copr project at <a href="https://copr.fedorainfracloud.org/coprs/g/esrille/releases/">@esrille/releases</a>.
To enable this Copr project, enter the following command into a terminal:</p>
<pre><code>sudo dnf copr enable @esrille/releases
</code></pre>
<p>To install Hiragana IME, use the following <strong>dnf</strong> command as usual:</p>
<pre><code>sudo dnf update
sudo dnf install ibus-hiragana
</code></pre>
<h3>Instructions for Ubuntu</h3>
<p>The Debian packages are available in the PPA repository at <a href="https://launchpad.net/~esrille/+archive/ubuntu/releases">esrille/releases</a>.
To enable this repository, enter the following command into a terminal:</p>
<pre><code>sudo add-apt-repository ppa:esrille/releases
</code></pre>
<p>To install the Hiragana IME, use the following <strong>apt</strong> command as usual:</p>
<pre><code>sudo apt update
sudo apt install ibus-hiragana
</code></pre>
<h3>Install from source</h3>
<p>To install the Hiragana IME from the source code, enter the following commands into a terminal:</p>
<pre><code>git clone https://github.com/esrille/ibus-hiragana.git
cd ibus-hiragana
meson setup --prefix /usr _build [-Denable-dic=true] [-Denable-html=true]
ninja -C _build
ninja -C _build  install
</code></pre>
<ul>
<li>Specify -Denable-dic=true to build Kanji and Katakana dictionaries.</li>
<li>Specify -Denable-html=true to generate HTML documents from the markdown files.</li>
</ul>
<p>Refer to Build-Depends in debian/control or BuildRequires in ibus-hiragana.spec for the packages required for building the Hiragana IME.</p>
<p>If you are using Fedora, you can use the following command to install the required packages:</p>
<pre><code>sudo yum-builddep ibus-hiragana.spec
</code></pre>
<p>If you are using Ubuntu, you can use the following command to install the required packages:</p>
<pre><code>sudo apt build-dep .
</code></pre>
<h2 id="input-source">Add the Hiragana IME to the input sources</h2>
<p><strong>Note</strong>: Keyboard layouts and input methods are collectively referred to as <a href="https://wiki.gnome.org/Design/OS/LanguageInput">input sources</a>.</p>
<p>After installing the Hiragana IME software package, restart your computer.
Then, follow the steps below to add the Hiragana IME to the input sources.
The steps for setting up the input sources differ depending on your desktop environment.</p>
<h3>Instructions for GNOME</h3>
<p>On Fedora and Ubuntu, GNOME is the default desktop environment.
The Hiragana IME currently works best in GNOME.
If you're using GNOME, open <strong>Settings</strong> and add <strong>Japanese (Hiragana IME)</strong> to <strong>Input Sources</strong> in the <strong>Keyboard</strong> pane.</p>
<p><img alt="Settings‚ÄîKeyboard" src="settings-keyboard.png"></p>
<h3>Instructions for other desktops</h3>
<p>Open <strong>IBus Preferences</strong>, and select the <strong>Input Method</strong> tab.
Add <strong>Hiragana IME</strong> to the list of <strong>Input Method</strong> by selecting the following item:
<br><br>
  <img alt="icon" src="../icon.png"> Hiragana IME
<br><br></p>
<h2 id="enable">Enable the Hiragana IME</h2>
<p>In IBus, you can switch between multiple input methods and use them.</p>
<p>To enable Hiragana IME, open the keyboard menu of the desktop shell by clicking the current input method logo like <nobr><strong>ja</strong></nobr>Ôºå<nobr><strong>„ÅÇ</strong></nobr> inside the top bar.
Then select <strong>Japanese (Hiragana IME)</strong>.</p>
<p><img alt="Keyboard menu" src="keyboard-menu.png"></p>
<p>As for the keyboard layout, Hiragana IME uses the previously selected keyboard layout.</p>
<ul>
<li>To use the Japanese keyboard layout, select <strong>Japanese</strong> from the keyboard menu first, then select <strong>Japanese (Hiragana IME)</strong>.</li>
<li>To use the US keyboard layout, select <strong>English (US)</strong> from the keyboard menu first, then select <strong>Japanese (Hiragana IME)</strong>.</li>
</ul>
<p>When you can't find the keyboard layout you want to use, add your preferred layout to the <strong>Input Sources</strong>.
Currently, Hiragana IME supports three keyboard layouts: <strong>Japanese</strong>, <strong>English (US)</strong>, and <strong>English (Dvorak)</strong>.</p>
<p><strong>Note</strong>: Often, different keyboard designs are used from country to country for each language. In Japan, both Japanese and US keyboards are used. The US keyboard is designed in the United States. Nevertheless, it is also utilized in many other countries by modifying the letters printed on the keycaps.</p>
<h2 id="wayland">Change the Configuration for Wayland</h2>
<p>From Ubuntu 21.04 and Fedora 25 onwards, Wayland is used by default for screen rendering. Wayland is being developed to replace the classic X server.</p>
<p>GNOME is also developing a new input method module for Wayland. Since it is still in its early stage of development, we recommend using the IBus input method module even on Wayland. To do so, define the GTK_IM_MODULE environment variable in your ~/.bash_profile (in Fedora) or ~/.profile (in Ubuntu) as below.</p>
<pre><code>export GTK_IM_MODULE=ibus
</code></pre>
<p>With the Wayland IM module, the surrounding text information sent to input methods is broken in GNOME 45 or earlier. In the latest GNOME 46, many applications still cannot send the surrounding text at the right time to the input methods with the Wayland IM module. You can check the version of GNOME by opening the GNOME <strong>Settings</strong> window, then going to <strong>About This System</strong>-<strong>System Details</strong>.</p>
<p><br>
The Hiragana IME setup is now complete.
You can use the <a href="settings.html">Hiragana IME Setup</a> window for additional settings.</p>
<h2 id="llm">Installation of Additional Components for Using a Large-Scale Language Model</h2>
<p>Hiragana IME has a feature that pre-selects the most probable conversion candidate using a Large-scale Language Model.
To use this, the following packages need to be installed:</p>
<ul>
<li><a href="https://huggingface.co/docs/transformers/">Huggingface Transformers</a></li>
<li><a href="https://huggingface.co/tohoku-nlp/bert-base-japanese-v3">tohoku-nlp/bert-base-japanese-v3</a></li>
</ul>
<p>Hiragana IME runs within a local Python virtual environment (venv).
To install the above packages with this venv, follow these steps:</p>
<ol>
<li>In <strong>Hiragana IME Setup</strong> window, enable the <a href="settings.html#llm">Use LLM for candidate selection</a> option.</li>
</ol>
<p><img alt="Hiragana IME Setup Window" src="ibus-setup-hiragana_3.png"></p>
<ol start="2">
<li>Click <strong>Apply</strong>, and the following window will open.</li>
</ol>
<p><img alt="Post Installation Window" src="postinst_1.png"></p>
<ol start="3">
<li>Click <strong>Install</strong> to start the installation. The installation log will be displayed within the window.</li>
<li>Once the installation is finished, the <strong>Install</strong> button will change to a <strong>Close</strong> button.</li>
</ol>
<p><img alt="Post Installation Window" src="postinst_2.png"></p>
<ol start="5">
<li>Click <strong>Close</strong> to close the window.</li>
</ol>
<p>The installation is now complete.
When you log in again, you can use the candidate pre-selection feature using the large-scale language model.</p>
<p><strong>Note</strong>: Hiragana IME creates its venv at <code>~/.local/share/ibus-hiragana/venv</code>. tohoku-nlp/bert-base-japanese-v3 files are stored in <code>~/.cache/huggingface/hub/models--cl-tohoku--bert-base-japanese-v3/</code>.</p>
</main>
</div>

<nav>
<a href=index.html id='nav-prev'><div>&lt;</div></a>
<a href=usage.html id='nav-next'><div>&gt;</div></a>
</nav>
</body>
</html>
