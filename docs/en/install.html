<!doctype html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, maximum-scale=1.0, user-scalable=yes'>
<title>Installation ‚Äî Hiragana IME</title>
<link href='../icon.png' rel='icon'>
<link rel='stylesheet' type='text/css' href='default.css'>
<meta content='Installation' name='description'>
<meta content='https://esrille.github.io/ibus-hiragana/install.html' property='og:url'>
<meta content='Installation ‚Äî Hiragana IME' property='og:title'>
<meta content='Installation' property='og:description'>
<meta content='https://esrille.github.io/ibus-hiragana/screenshot.png' property='og:image'>
<meta content='product' property='og:type'>
<meta content='summary_large_image' name='twitter:card'>
<meta content='@esrille' name='twitter:creator'>
<script>
function expandToc() {
  document.getElementById('toc').querySelectorAll('details').forEach((e) => {
    e.setAttribute('open', 'open')
  })
}
function shrinkToc() {
  document.getElementById('toc').querySelectorAll('details').forEach((e) => {
    e.removeAttribute('open')
  })
}
</script>
</head>
<body>
<div id='wrapper'>
<div id='sidebar'>
<header id='title'>
<a href='https://github.com/esrille/ibus-hiragana'><img alt='icon' src='../icon.png'> Hiragana IME</a>
<div style='float: right; font-size: 10px;'>
<div style='position: relative; top: 18px;'>
<button onclick='shrinkToc()'>‚ñ≤</button>
<button onclick='expandToc()'>‚ñº</button>
</div>
</div>
</header>
<div id='toc'>
<ul>
<li><details><summary><a href='index.html'>Hiragana IME for IBus</a></summary>
<ul>
  <li><a href='index.html#introduction'>Introduction</a>
  <li><a href='index.html#modeless'>Modeless Input Methods</a>
  <li><a href='index.html#llm'>Utilizing a Large Language Model for Kana-Kanji Conversion</a>
</ul>
</details>
<li><details open><summary><a href='install.html'>Installation</a></summary>
<ul>
  <li><a href='install.html#install'>Install the Hiragana IME software package</a>
  <li><a href='install.html#input-source'>Add Hiragana IME to the input sources</a>
  <li><a href='install.html#enable'>Enable Hiragana IME</a>
  <li><a href='install.html#llm'>Install additional components for using LLM</a>
  <li><a href='install.html#update'>Updates</a>
  <li><a href='install.html#uninstall'>Uninstall</a>
  <li><a href='install.html#user-files'>User data stored in your home directory</a>
</ul>
</details>
<li><details><summary><a href='usage.html'>Usage</a></summary>
<ul>
  <li><a href='usage.html#input-mode'>Changing Input Modes</a>
  <li><a href='usage.html#input-kanji'>Inputting Kanji and Katakana Words</a>
  <li><a href='usage.html#input-okurigana'>Entering Words with Okurigana</a>
  <li><a href='usage.html#input-shrink'>Changing the Length of the Reading</a>
  <li><a href='usage.html#katanaka'>Converting into Katakana</a>
  <li><a href='usage.html#about'>Find Information about Hiragana IME</a>
</ul>
</details>
<li><details><summary><a href='key_assign.html'>Key Bindings</a></summary>
<ul>
  <li><a href='key_assign.html#input-mode'>Key Bindings for Changing Input Mode</a>
  <li><a href='key_assign.html#input-hiragana-mode'>Key bindings in Hiragana Mode</a>
  <li><a href='key_assign.html#input-conversion'>Key Bindings during Conversion</a>
</ul>
</details>
<li><details><summary><a href='settings.html'>Settings</a></summary>
<ul>
  <li><a href='settings.html#ibus-setup-hiragana'>Hiragana IME Setup Window</a>
  <li><a href='settings.html#layout'>Keyboard Tab</a>
  <li><a href='settings.html#dictionary'>Dictionary Tab</a>
  <li><a href='settings.html#option'>Option Tab</a>
</ul>
</details>
<li><details><summary><a href='layouts.html'>Kana Input</a></summary>
<ul>
  <li><a href='layouts.html#jis'>Kana (JIS Layout)</a>
  <li><a href='layouts.html#new_stickney'>Kana (New Stickney Layout)</a>
  <li><a href='layouts.html#history'>Why the current JIS Kana layout is hard to use?</a>
</ul>
</details>
<li><details><summary><a href='roomazi.html'>R≈çmaji Input</a></summary>
<ul>
  <li><a href='roomazi.html#tuzuri'>Inputting Japanese in R≈çmaji</a>
  <li><a href='roomazi.html#hyo'>Romanization Charts</a>
  <li><a href='roomazi.html#keyboard'>Key Bindings</a>
</ul>
</details>
<li><details><summary><a href='altgr.html'>AltGr Key</a></summary>
<ul>
  <li><a href='altgr.html#altgr'>What is <span class='key'>AltGr</span> key?</a>
  <li><a href='altgr.html#altgr-settings'>Switching the right <span class='key'>Alt</span> key to the <span class='key'>AltGr</span> key</a>
  <li><a href='altgr.html#altgr-characters'>Entering Characters and Symbols on the <span class='key'>AltGr</span> Layers</a>
</ul>
</details>
<li><details><summary><a href='dictionary.html'>The Hiragana IME Dictionary</a></summary>
<ul>
  <li><a href='dictionary.html#personal-dictionary'>Editing Dictionaries</a>
  <li><a href='dictionary.html#okurigana'>Adding words with okurigana</a>
  <li><a href='dictionary.html#tool'>Command-line dictionary tool</a>
</ul>
</details>
<li><details><summary><a href='developer.html'>Development</a></summary>
<ul>
  <li>Build and Install
  <li><a href='developer.html#tests'>Unit Testing</a>
  <li><a href='developer.html#uninstall'>Uninstall</a>
</ul>
</details>

</ul>
<hr>
<a href='../index.html' id='toc-lang'>Êó•Êú¨Ë™û üåé</a>
</div>
</div>
<main>
<h1>Installation</h1>
<p>To set up Hiragana IME, follow the steps below:</p>
<ol>
<li><a href="#install">Install the Hiragana IME software package</a></li>
<li><a href="#input-source">Add Hiragana IME to the input sources</a></li>
<li><a href="#enable">Enable Hiragana IME</a></li>
<li><a href="#llm">Install additional components for using LLM</a></li>
</ol>
<h2 id="install">Install the Hiragana IME software package</h2>
<p>If you use Fedora or Ubuntu, the Hiragana IME package will be automatically downloaded during installation using the <strong>dnf</strong> or <strong>apt</strong> command.</p>
<h3>Instructions for Fedora</h3>
<p>The RPM packages are available in the Copr project at <a href="https://copr.fedorainfracloud.org/coprs/g/esrille/releases/">@esrille/releases</a>.
To enable this Copr project, enter the following command into a terminal:</p>
<pre><code>sudo dnf copr enable @esrille/releases
</code></pre>
<p>To install Hiragana IME, use the following <strong>dnf</strong> command as usual:</p>
<pre><code>sudo dnf update
sudo dnf install ibus-hiragana
</code></pre>
<h3>Instructions for Ubuntu</h3>
<p>The Debian packages are available in the PPA repository at <a href="https://launchpad.net/~esrille/+archive/ubuntu/releases">esrille/releases</a>.
To enable this repository, enter the following command into a terminal:</p>
<pre><code>sudo add-apt-repository ppa:esrille/releases
</code></pre>
<p>To install Hiragana IME, use the following <strong>apt</strong> command as usual:</p>
<pre><code>sudo apt update
sudo apt install ibus-hiragana
</code></pre>
<h3 id="wayland">Change the input method module for Wayland</h3>
<p>Ubuntu 21.04 and later, as well as Fedora 25 and later, use Wayland as the default screen rendering system.
Wayland is being developed to replace the classic X server.</p>
<p>GNOME is also developing a new input method module for Wayland. However, it is still in the early stages of development.
In GNOME 45 or earlier, the surrounding text information sent to input methods is broken.
In GNOME 46, the surrounding text information is not sent to input methods at the right time with many applications.</p>
<p>So, we recommend using the IBus input method module even on Wayland.
To do so, define GTK_IM_MODULE environment variable in your ~/.bash_profile (in Fedora) or ~/.profile (in Ubuntu) as below.</p>
<pre><code>export GTK_IM_MODULE=ibus
</code></pre>
<p>You can check the version of GNOME by opening the GNOME <strong>Settings</strong> window, then going to <strong>About This System</strong>-<strong>System Details</strong>.</p>
<h3>Restart your computer</h3>
<p>Please restart your computer to apply the changes before proceeding to the next section.</p>
<h2 id="input-source">Add Hiragana IME to the input sources</h2>
<p>Next, we will add Hiragana IME to the input sources.
We call keyboard layouts and input methods collectively as <strong>Input Sources</strong> on GNOME.
The setup process varies depending on your desktop environment.</p>
<h3>Instructions for GNOME</h3>
<p>On Fedora and Ubuntu, GNOME is the default desktop environment.
The Hiragana IME currently works best in GNOME.
If you're using GNOME, open <strong>Settings</strong> and add <strong>Japanese (Hiragana IME)</strong> to <strong>Input Sources</strong> in the <strong>Keyboard</strong> pane.</p>
<p><img alt="Settings‚ÄîKeyboard" src="settings-keyboard.png"></p>
<h3>Instructions for other desktops</h3>
<p>Open <strong>IBus Preferences</strong>, and select the <strong>Input Method</strong> tab.
Add <strong>Hiragana IME</strong> to the list of <strong>Input Method</strong> by selecting the following item:
<br><br>
  <img alt="icon" src="../icon.png"> Hiragana IME
<br><br></p>
<h2 id="enable">Enable Hiragana IME</h2>
<p>In IBus, you can switch between multiple input methods and use them.</p>
<p>To enable Hiragana IME, open the keyboard menu of the desktop shell by clicking the current input method logo like <nobr><strong>ja</strong></nobr>Ôºå<nobr><strong>„ÅÇ</strong></nobr> inside the top bar.
Then select <strong>Japanese (Hiragana IME)</strong>.</p>
<p><img alt="Keyboard menu" src="keyboard-menu.png"></p>
<p>As for the keyboard layout, Hiragana IME uses the previously selected keyboard layout.</p>
<ul>
<li>To use the Japanese keyboard layout, select <strong>Japanese</strong> from the keyboard menu first, then select <strong>Japanese (Hiragana IME)</strong>.</li>
<li>To use the US keyboard layout, select <strong>English (US)</strong> from the keyboard menu first, then select <strong>Japanese (Hiragana IME)</strong>.</li>
</ul>
<p>When you can't find the keyboard layout you want to use, add your preferred layout to the <strong>Input Sources</strong>.
Currently, Hiragana IME supports three keyboard layouts: <strong>Japanese</strong>, <strong>English (US)</strong>, and <strong>English (Dvorak)</strong>.</p>
<p><strong>Note</strong>: Often, different keyboard designs are used from country to country for each language. In Japan, both Japanese and US keyboards are used. The US keyboard is designed in the United States. Nevertheless, it is also utilized in many other countries by modifying the letters printed on the keycaps.</p>
<h2 id="llm">Install additional components for using LLM</h2>
<p>Hiragana IME has a feature to select the most probable conversion candidate using a Large Language Model.
To use this feature, the following packages need to be installed:</p>
<ul>
<li><a href="https://huggingface.co/docs/transformers/">Huggingface Transformers</a></li>
<li><a href="https://huggingface.co/tohoku-nlp/bert-base-japanese-v3">tohoku-nlp/bert-base-japanese-v3</a></li>
</ul>
<p>Hiragana IME runs within a local Python virtual environment (venv).
To install the above packages in this venv, follow these steps:</p>
<ol>
<li>In <strong><a href="settings.html#ibus-setup-hiragana">Hiragana IME Setup</a></strong> window, open the <strong>Option</strong> tab:</li>
</ol>
<p><img alt="Hiragana IME Setup Window" src="ibus-setup-hiragana_3.png"></p>
<ol start="2">
<li>Click <strong>Install</strong>, and the following window will open.</li>
</ol>
<p><img alt="Post Installation Window" src="postinst_1.png"></p>
<ol start="3">
<li>Click <strong>Install</strong> to begin the installation.
The installation log will appear in the window.
Once the installation is finished, the <strong>Install</strong> button will change to <strong>Close</strong>.
Click <strong>Close</strong> to exit the window.</li>
</ol>
<p><img alt="Post Installation Window" src="postinst_2.png"></p>
<ol start="4">
<li>In the <strong>Option</strong> tab of the <strong><a href="settings.html#ibus-setup-hiragana">Hiragana IME Setup</a></strong> window, select the <strong>Use LLM for candidate selection</strong> option.</li>
</ol>
<p><img alt="Hiragana IME Setup Window" src="ibus-setup-hiragana_5.png"></p>
<p>If your PC has an NVIDIA GPU, Hiragana IME can use <a href="settings.html#cuda">CUDA</a> to accelerate the LLM calculation.
To use CUDA, select the <strong>Use CUDA for LLM calculation</strong> option as well.</p>
<ol start="5">
<li>Click <strong>OK</strong> to exit the the <strong><a href="settings.html#ibus-setup-hiragana">Hiragana IME Setup</a></strong> window.
All the packages you need for using the LLM are now installed.</li>
</ol>
<p><strong>Hint</strong>: In the <a href="usage.html#about">About</a> dialog box, you can check whether Hiragana IME uses LLM.</p>
<h2 id="update">Updates</h2>
<p>When a new release of the Hiragana IME is available, we will announce it on the <a href="https://github.com/esrille/ibus-hiragana/releases">Releases</a> page on GitHub.
The steps for updating Hiragana IME depend on how you install it.
Follow the update steps that correspond to your installation method.</p>
<h3>Instructions for Fedora</h3>
<p>The Hiragana IME can be updated just like other Fedora packages.
To do so from the command line, use the following <code>dnf</code> command:</p>
<pre><code>sudo dnf update
</code></pre>
<h3>Instructions for Ubuntu</h3>
<p>The Hiragana IME can be updated just like other Ubuntu packages.
To do so from the command line, use the following <code>apt</code> commands:</p>
<pre><code>sudo apt update
sudo apt upgrade
</code></pre>
<p><br>
<strong>Note</strong>: The OS updates may include a newer version of the Python package.
When Python is updated, Hiragana IME will recreate its virtual environment using the updated Python command.
After this upgrade, you will need to reinstall the LLM packages.
If you see a desktop notification like the one below, please proceed to reinstall the LLM-related packages.</p>
<p>&nbsp;&nbsp;<img alt="Desktop Notification" src="notification.png"></p>
<h2 id="uninstall">Uninstall</h2>
<p>The steps for uninstalling Hiragana IME depend on how you install it.
Follow the uninstall steps that correspond to your installation method.</p>
<h3>Instructions for Fedora</h3>
<p>To uninstall Hiragana IME, use the following <code>dnf</code> command:</p>
<pre><code>sudo dnf remove ibus-hiragana
</code></pre>
<h3>Instructions for Ubuntu</h3>
<p>To uninstall Hiragana IME, use the following <code>apt</code> command:</p>
<pre><code>sudo apt remove ibus-hiragana
</code></pre>
<h2 id="user-files">User data stored in your home directory</h2>
<p>The Hiragana IME stores user data in the directory <code>~/.local/share/ibus-hiragana/</code>.
Under this directory, Hiragana IME stores your input histories, user dictionary file(s), and also its Python virtual environment:</p>
<pre><code>~/.local/share/ibus-hiragana/
‚îú‚îÄ‚îÄ dic/        # Your input histories
‚îú‚îÄ‚îÄ my.dic      # User dictionary file
‚îî‚îÄ‚îÄ venv/       # Python virtual environment for Hiragana IME
</code></pre>
<p>If you want to install Hiragana IME on other PCs, you can use the copy of the directory <code>dic/</code> and the file <code>my.dic</code>.</p>
<h3>Clean uninstall</h3>
<p>If you want to remove all user data after uninstalling Hiragana IME, you can remove the directory <code>~/.local/share/ibus-hiragana/</code>:</p>
<pre><code>rm -rf ~/.local/share/ibus-hiragana
</code></pre>
<p>If you used Hiragana IME with the LLM packages, the <a href="https://huggingface.co/tohoku-nlp/bert-base-japanese-v3">tohoku-nlp/bert-base-japanese-v3</a> files are stored in the directory <code>~/.cache/huggingface/hub/models--cl-tohoku--bert-base-japanese-v3/</code>.
Please note that these files might be used by other applications that use <a href="https://huggingface.co/docs/transformers/index">Transformers</a>.
If you are sure that you want to delete these files, enter the following command into a terminal:</p>
<pre><code>rm -rf ~/.cache/huggingface/hub/models--cl-tohoku--bert-base-japanese-v3
</code></pre>
</main>
</div>

<nav>
<a href=index.html id='nav-prev'><div>&lt;</div></a>
<a href=usage.html id='nav-next'><div>&gt;</div></a>
</nav>
</body>
</html>
