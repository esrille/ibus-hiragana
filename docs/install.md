# インストール￹方法￺ほうほう￻

　「ひらがなIME」を￹利用￺りよう￻するには、つぎの￹手順￺てじゅん￻でセットアップをすすめていきます。

1. [ソフトウェア パッケージをインストールする](#install)
2. [OSの入力ソースを￹設定￺せってい￻する](#input-source)
3. [「ひらがなIME」を￹有効￺ゆうこう￻にする](#enable)
4. [Waylandを￹使用￺しよう￻するばあいの￹設定￺せってい￻（GNOME 46よりまえのばあい）](#wayland)

## ソフトウェア パッケージのインストール {: #install}

　FedoraかUbuntuをつかっているときは、かんたんなコマンドで「ひらがなIME」をインストールすることができます。

### Fedoraのばあい

　Fedora￹用￺よう￻のソフトウェア パッケージはCoprプロジェクト「[@esrille/releases](https://copr.fedorainfracloud.org/coprs/g/esrille/releases/)」から￹提供￺ていきょう￻しています。
このCoprプロジェクトを￹有効￺ゆうこう￻にするには、いちど、コマンドラインからつぎのように￹実行￺じっこう￻します。

```
sudo dnf copr enable @esrille/releases
```

　そのあとは、いつものように、dnfコマンドで「ひらがなIME」をインストールできます。

```
sudo dnf install ibus-hiragana
```

### Ubuntuのばあい

　Ubuntu￹用￺よう￻のソフトウェア パッケージはPPAレポジトリ「[esrille/releases](https://launchpad.net/~esrille/+archive/ubuntu/releases)」から￹提供￺ていきょう￻しています。
このPPAレポジトリを￹有効￺ゆうこう￻にするには、いちど、コマンドラインからつぎのように￹実行￺じっこう￻します。

```
sudo add-apt-repository ppa:esrille/releases
```

　そのあとは、いつものように、aptコマンドで「ひらがなIME」をインストールできます。
sudo
```
sudo apt update
sudo apt install ibus-hiragana
```

### ソースコードからインストールする￹方法￺ほうほう￻

　「ひらがなIME」をソースコードからビルドしてインストールするには、つぎのようにします。

```
git clone https://github.com/esrille/ibus-hiragana.git
cd ibus-hiragana
./autogen.sh  --prefix=/usr [--enable-dic] [--enable-html]
make
sudo make install
```

　autogen.shは、autotoolsの￹設定￺せってい￻をおこない、configureスクリプトよびだします。
--enable-dicを￹指定￺してい￻すると、￹漢字￺かんじ￻￹辞書￺じしょ￻もビルドすることができます。
--enable-htmlを￹指定￺してい￻すると、ヘルプ用のhtmlファイルをビルドすることができます。
　ビルドするときに￹必要￺ひつよう￻なパッケージについては、debian/controlのBuild-Depends、あるいは、ibus-hiragana.specのBuildRequiresを￹参考￺さんこう￻にしてください。
　Fedoraであれば、つぎのコマンドでビルドに必要なパッケージをインストールできます。

```
sudo yum-builddep ibus-hiragana.spec
```

　Ubuntuであれば、つぎのコマンドでビルドに必要なパッケージをインストールできます。
```
sudo apt build-dep .
```

## OSの￹入力￺にゅうりょく￻ソースの￹設定￺せってい￻ {: #input-source}

　ソフトウェア パッケージのインストールができたら、いちどコンピューターを￹再￺さい￻￹起動￺きどう￻してください。
　つづいて、OSの「￹入力￺にゅうりょく￻ソース(※)」の￹設定￺せってい￻をおこないます。
￹入力￺にゅうりょく￻ソースのセットアップ￹方法￺ほうほう￻は、デスクトップ￹環境￺かんきょう￻によってすこし￹異￺こと￻なります。

<br>※ キーボード￹配列￺はいれつ￻やインプット メソッドのことをまとめて「[￹入力￺にゅうりょく￻ソース](https://wiki.gnome.org/Design/OS/LanguageInput)」とよんでいます。

### GNOMEを￹利用￺りよう￻しているとき

　FedoraやUbuntuでは、GNOMEが￹標準￺ひょうじゅん￻のデスクトップ￹環境￺かんきょう￻になっています。GNOMEを￹利用￺りよう￻しているときは、GNOMEの「￹設定￺せってい￻」をひらいて、「キーボード」の「￹入力￺にゅうりょく￻ソース」に、「￹日本語￺にほんご￻ (Hiragana IME)」を￹追加￺ついか￻します。

![￹設定￺せってい￻—キーボード](settings-keyboard.png)

### GNOME￹以外￺いがい￻を￹利用￺りよう￻しているとき

　「IBusの￹設定￺せってい￻」ウィンドウをひらいて、「￹入力￺にゅうりょく￻メソッド」タブの「￹入力￺にゅうりょく￻メソッド」に、
<br><br>
　　![アイコン](icon.png) ￹日本語￺にほんご￻ - Hiragana IME
<br><br>
を￹追加￺ついか￻します。

## 「ひらがなIME」を￹有効￺ゆうこう￻にする {: #enable}

　IBusでは、￹複数￺ふくすう￻のインプットメソッドエンジンをつかうことができるようになっています。
　「ひらがなIME」を￹有効￺ゆうこう￻するには、デスクトップ シェルの「キーボード メニュー」をひらいて、「日本語 (Hiragana IME)」をえらびます。

![キーボード メニュー](keyboard-menu.png)

　キーボード メニューは、トップバーの￹現在￺げんざい￻の￹入力￺にゅうりょく￻メソッドを￹表示￺ひょうじ￻している￹部分￺ぶぶん￻（「<nobr>ja</nobr>｣，｢<nobr>あ</nobr>」など）をクリックしてひらきます。
　「ひらがなIME」の￹基本的￺きほんてき￻なセットアップはこれで￹完了￺かんりょう￻です。
さらにこまかな￹設定￺せってい￻は、「[ひらがなIMEの￹設定￺せってい￻](settings.html)」ウィンドウでおこないます。

### パソコンにつなげるキーボードの￹種類￺しゅるい￻を￹指定￺してい￻する￹方法￺ほうほう￻

　キーボードは￹国￺くに￻や￹言語￺げんご￻によってそのスイッチのレイアウトがことなります。
￹日本￺にほん￻では、￹日本語￺にほんご￻キーボードのほかに￹英語￺えいご￻(US)キーボードも￹利用￺りよう￻されています。
￹英語￺えいご￻(US)キーボードは、アメリカで￹一般的￺いっぱんてき￻につかわれているキーボードです。
USはUnited States (of America)の￹略￺りゃく￻です。
￹英語￺えいご￻キーボードでも、イギリスのものはアメリカのものとまたすこしキーボード レイアウトがちがいます。
　「ひらがなIME」で￹英語￺えいご￻(US)キーボードを￹利用￺りよう￻したいときは、まず、￹入力￺にゅうりょく￻ソースから「￹英語￺えいご￻(US)」を￹選択￺せんたく￻します。そのあとで、￹入力￺にゅうりょく￻ソースから「￹日本語￺にほんご￻(Hiragana IME)」を￹選択￺せんたく￻します。
　「ひらがなIME」で￹日本語￺にほんご￻キーボードを￹利用￺りよう￻したいときは、まず、￹入力￺にゅうりょく￻ソースから「￹日本語￺にほんご￻」を￹選択￺せんたく￻します。そのあとで、￹入力￺にゅうりょく￻ソースから「￹日本語￺にほんご￻(Hiragana IME)」を￹選択￺せんたく￻します。
　「ひらがなIME」は￹直前￺ちょくぜん￻に￹指定￺してい￻されていたキーボード レイアウトにあわせて￹動作￺どうさ￻するようになっています。
￹使用￺しよう￻するキーボードのレイアウトがみつからないときは、GNOMEの「￹設定￺せってい￻」をひらいて、「キーボード」の「￹入力￺にゅうりょく￻ソース」に￹追加￺ついか￻してください。

<br>※ 「ひらがなIME」は、いまのところ、「￹日本語￺にほんご￻」,「￹英語￺えいご￻(US)」,「￹英語￺えいご￻(Dvorak)」の３つのキーボード レイアウトをサポートしています。

## Waylandを￹使用￺しよう￻するばあいの￹設定￺せってい￻（GNOME 46よりまえのばあい） {: #wayland}

　Ubuntu 21.04￹以降￺いこう￻やFedora 25￹以降￺いこう￻では、デフォルトで￹画面￺がめん￻の￹描画￺びょうが￻にWaylandをつかうようになっています。
Waylandは、ながくつかわれてきたXサーバーをおきかえるものです。
　GNOME 46￹以降￺いこう￻では、Waylandでも「ひらがなIME」をそのままつかえるようになっています。
GNOMEのバージョンは、GNOMEの[￹設定￺せってい￻]ウィンドウをひらいて、[このシステムについて]—[システムの￹詳細￺しょうさい￻￹設定￺せってい￻]をしらべると￹確認￺かくにん￻できます。
　ふるいWaylandベースのシステムで「ひらがなIME」を￹使用￺しよう￻されるときは、￹環境￺かんきょう￻￹変数￺へんすう￻GTK_IM_MODULEにibusを￹指定￺してい￻してください。
そのためには、つぎの￹行￺ぎょう￻を ~/.bash_profile (Fedoraなど)か ~/.profile (Ubuntuなど)に￹追加￺ついか￻して、ログインしなおしてください。

```
export GTK_IM_MODULE=ibus
```

このようにしておかないと、ただしい￹周辺￺しゅうへん￻テキストの￹情報￺じょうほう￻がIMEにおくられてきません。
